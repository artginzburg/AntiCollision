!function(){function t(t){if(Array.isArray(t))return t}function n(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function o(t,n){if(t){if("string"==typeof t)return i(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,n):void 0}}function r(i,r){return t(i)||n(i)||o(i,r)||e()}function a(t){if(Array.isArray(t))return i(t)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return a(t)||n(t)||o(t)||u()}function s(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function l(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,n,e){return n&&l(t.prototype,n),e&&l(t,e),t}function d(t,n){return Math.random()*(n-t)+t}var v={drawTraces:!0,useAntiCollisionBug:!0,strokeBalls:!1,dragWithMouseOver:!1};window.settings=v;var f,y,w,m=function(){"use strict";function t(n,e,i){s(this,t),this.x=n,this.y=e,this.z=i}return h(t,[{key:"add",value:function(n){return new t(this.x+n.x,this.y+n.y,this.z+n.z)}},{key:"sub",value:function(n){return new t(this.x-n.x,this.y-n.y,this.z-n.z)}},{key:"mul",value:function(n){return new t(this.x*n,this.y*n,this.z*n)}},{key:"div",value:function(n){return new t(this.x/n,this.y/n,this.z/n)}},{key:"toRGB",value:function(){return"rgb(".concat(this.x," ").concat(this.y," ").concat(this.z,")")}},{key:"toRGBA",value:function(t){return"rgba(".concat(this.x,", ").concat(this.y,", ").concat(this.z,", ").concat(t,")")}}]),t}(),p=function(){"use strict";function t(n,e){s(this,t),this.x=n,this.y=e}return h(t,[{key:"add",value:function(n){return new t(this.x+n.x,this.y+n.y)}},{key:"sub",value:function(n){return new t(this.x-n.x,this.y-n.y)}},{key:"mul",value:function(n){return new t(this.x*n,this.y*n)}},{key:"div",value:function(n){return new t(this.x/n,this.y/n)}}]),t}();(y=f||(f={})).length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},y.rotate=function(t,n,e){var i=Math.atan2(t.y,t.x)-Math.PI/2*n*e;return new p(Math.cos(i),Math.sin(i)).mul(f.length(t))},(w=y.RotationDirection||(y.RotationDirection={}))[w.Left=1]="Left",w[w.Right=-1]="Right";var b=new m(0,255,0),g=new m(255,0,0),x=b.toRGB(),k=100,L=function(){"use strict";function t(n,e,i){s(this,t),this.r=i,this.position=new p(n,e),this.velocity=new p(d(-4,4),d(-4,4)),this.r=i,this.position_history=Array(k).fill(this.position),this.current_idx=0,this.stableCount=0}return h(t,[{key:"save",value:function(){this.position_history[this.current_idx]=this.position,this.current_idx=++this.current_idx%k}},{key:"getVA",value:function(){for(var t=[],n=0;n<k;++n){var e=(n+this.current_idx)%k,i=n/k;t[n]||(t[n]={}),t[n].position=this.position_history[e];var o=255*i;t[n].color=new m(0,o,0)}return t}},{key:"draw",value:function(t){v.drawTraces&&this.drawTrace(t),t.fillStyle=this.color.toRGB(),t.beginPath(),t.arc(this.position.x,this.position.y,this.r,0,2*Math.PI),v.strokeBalls&&this.drawStroke(t),t.fill(),t.closePath()}},{key:"drawStroke",value:function(t){t.strokeStyle="#000a",t.stroke()}},{key:"drawTrace",value:function(t){var n=this.getVA(),e=n[0].position;t.beginPath(),n.forEach((function(n){t.lineTo(n.position.x,n.position.y)})),t.lineTo(this.position.x,this.position.y),t.moveTo(e.x,e.y),t.closePath(),this.applyTraceColor(t,e)}},{key:"applyTraceColor",value:function(t,n){var e=t.createLinearGradient(n.x,n.y,this.position.x,this.position.y);e.addColorStop(0,"transparent"),e.addColorStop(1,x),t.strokeStyle=e,t.stroke()}}]),t}();var E=1;var A=.35,M=.1,S=5e3,T=1e3,R=.2;function P(t,n){return e=t.clientX,i=t.clientY,o=n.clientX,r=n.clientY,Math.sqrt(Math.pow(e-o,2)+Math.pow(i-r,2));var e,i,o,r}function C(){return.18/(Math.abs(-1.55/A)/15.5)}var z,I=.01,B=.5;function _(t,n){if(v.dragWithMouseOver){var e=t(n);return function(t){var n=e.sub(t.position),i=f.length(n),o=t.r;i<o&&(t.position=t.position.add(n.mul(I*(o-i))),t.velocity=t.velocity.add(n.mul(B*(o-i))))}}}function D(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];window.addEventListener(e?"keydown":"keyup",(function(e){e.code!==t&&e.key!==t||n()}))}function F(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,e=function(e){var i=function(){t(e),r()};function o(){window.removeEventListener("touchend",i)}function r(){window.removeEventListener("touchmove",o)}window.addEventListener("touchend",i,{once:!0}),window.addEventListener("touchmove",o,{once:!0}),setTimeout((function(){o(),r()}),n)};return window.addEventListener("touchstart",e),e}var j={increment:"]",decrement:"[",incrementFast:"}",decrementFast:"{"},q={increment:"ArrowUp",decrement:"ArrowDown",rotateLeft:"ArrowLeft",rotateRight:"ArrowRight"},G={default:.1,fast:.3},O={default:.2};function Y(t,n){var e=t.r+t.r*n;t.r=Math.max(e,5)}var W,X,U,V=document.querySelector("canvas"),H=V.getContext("2d");function $(){V.width=window.innerWidth,V.height=window.innerHeight}$(),window.addEventListener("resize",$),X=function(t){(U+=t)<0&&(U=0),U>1&&(U=1),A=2.9*U+M},U=.1,window.addEventListener("wheel",(function(t){var n=t.deltaY;X(-n/S*C())})),null!==navigator.userAgent.match(/iPhone|iPad|iPod/i)?window.addEventListener("touchmove",(function(t){var n,e,i,o;(function(t){return void 0!==t.scale})(t)&&(function(t){t.scale!==E&&t.preventDefault()}(t),n=t.scale,e=n-E,i=C()*R,o=A+e*R*i,A=Math.min(3,Math.max(M,o)))}),{passive:!1}):(W=null,window.addEventListener("touchstart",(function(t){var n=t.touches;n.length>1&&(W=P(n[0],n[1]))})),window.addEventListener("touchend",(function(){W=null})),window.addEventListener("touchmove",(function(t){var n=t.touches;if(null!==W){var e=P(n[0],n[1]);X((e-W)/T)}})));for(var J,K,N,Q,Z=1,tt=1,nt=1,et=1,it=[],ot=0;ot<20;ot++){var rt=d(0,2*Math.PI),at=350*Math.cos(rt),ut=350*Math.sin(rt);it.push(new L(at+.5*V.width,ut+.5*V.height,d(70,5)))}function ct(){et=1===Z?10:1}J=it,K=vt,N=70,Q=5,window.addEventListener("contextmenu",(function(t){t.preventDefault();var n=K(t);J.push(new L(n.x,n.y,d(N,Q)))})),function(t,n,e){var i=function(i){var o=n(i);!function(t){if(!t)return;z=z===t?null:t}(e(o,t))};window.addEventListener("click",i),F((function(t){if(1===t.touches.length){var n=t.touches[0];i({x:n.clientX,y:n.clientY})}})),D("Escape",(function(){z=null}))}(it,vt,(function(t,n){var e=!0,i=!1,o=void 0;try{for(var r,a=n[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var u=r.value,c=t.sub(u.position);if(f.length(c)<u.r)return u}}catch(t){i=!0,o=t}finally{try{e||null==a.return||a.return()}finally{if(i)throw o}}return null})),D(j.increment,(function(){z&&Y(z,G.default)}),!0),D(j.decrement,(function(){z&&Y(z,-G.default)}),!0),D(j.incrementFast,(function(){z&&Y(z,G.fast)}),!0),D(j.decrementFast,(function(){z&&Y(z,-G.fast)}),!0),D(q.increment,(function(){z&&(z.velocity=z.velocity.mul(1+O.default))}),!0),D(q.decrement,(function(){z&&(z.velocity=z.velocity.mul(1-O.default))}),!0),D(q.rotateLeft,(function(){z&&(z.velocity=f.rotate(z.velocity,O.default,f.RotationDirection.Left))}),!0),D(q.rotateRight,(function(){z&&(z.velocity=f.rotate(z.velocity,O.default,f.RotationDirection.Right))}),!0),D("Space",ct),function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,i=function(i){var o=setTimeout((function(){setTimeout((function(){t(i)}),e),window.removeEventListener("touchend",r),window.removeEventListener("touchmove",a)}),n);function r(){u(),window.removeEventListener("touchmove",a)}function a(){u(),window.removeEventListener("touchend",r)}function u(){clearTimeout(o)}window.addEventListener("touchend",r,{once:!0}),window.addEventListener("touchmove",a,{once:!0})};window.addEventListener("touchstart",i)}(ct),D("a",(function(){v.drawTraces=!v.drawTraces}));var st,lt=0,ht={x:0,y:0};function dt(){return[-(t=z?z.position:st).x+.5*V.width/A,-t.y+.5*V.height/A];var t}function vt(t){var n=new p(t.x,t.y),e=r(dt(),2),i=e[0],o=e[1],a=new p(i,o);return n.div(A).sub(a)}window.addEventListener("mousemove",(function(t){ht.x=t.x,ht.y=t.y})),window.requestAnimationFrame((function t(n){var e;nt!==et&&(nt+=et-nt);var i=!0;if(!tt){var o=!0,r=!1,a=void 0;try{for(var u,s=it[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var l=u.value;l.stable=!0,l.save()}}catch(t){r=!0,a=t}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}!(i=function(t,n){for(var e=!0,i=t.length,o=.01,r=new p(.5*V.width,.5*V.width),a=_(vt,ht),u=0;u<i;u++){var c=t[u],s=r.sub(c.position);c.velocity=c.velocity.add(s.mul(o)),null==a||a(c);for(var l=u+1;l<i;l++){var h=t[l],d=c.position.sub(h.position),y=f.length(d),w=c.r+h.r;if(y<w){e=!1,c.stable=!1,h.stable=!1;var m=d.div(y);c.position=c.position.add(m.mul(.5*(w-y))),h.position=h.position.sub(m.mul(.5*(w-y))),v.useAntiCollisionBug||(c.velocity=c.velocity.add(m.mul(.5*(w-y))),h.velocity=h.velocity.sub(m.mul(.5*(w-y))))}}}for(var b=0;b<i;b++)t[b].stable?t[b].stableCount++:t[b].stableCount=0;return e}(it))&&lt<200&&(lt=0),i&&++lt,nt&&(Z=nt),tt=Z}(function(t,n){var e=.016,i=!0,o=!1,r=void 0;try{for(var a,u=t[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var c=a.value;c.position=c.position.add(c.velocity.mul(e/n))}}catch(t){o=!0,r=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw r}}tt--})(it,Z),st=new p(0,0);var h=!0,d=!1,y=void 0;try{for(var w,m=it[Symbol.iterator]();!(h=(w=m.next()).done);h=!0){var x=w.value,k=lt>199?1:Math.min(1,x.stableCount/255),L=b.mul(k).add(g.mul(1-k));x.r;Z>1&&x.r,st=st.add(x.position),x.color=L}}catch(t){d=!0,y=t}finally{try{h||null==m.return||m.return()}finally{if(d)throw y}}st=st.div(it.length),H.clearRect(0,0,V.width,V.height),H.save(),H.scale(A,A),(e=H).translate.apply(e,c(dt())),it.forEach((function(t){return t.draw(H)})),H.fillStyle="purple",H.beginPath(),H.arc(st.x,st.y,10,0,2*Math.PI),H.fill(),H.closePath(),H.restore(),window.requestAnimationFrame(t)}))}();
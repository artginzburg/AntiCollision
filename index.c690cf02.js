!function(){function t(t){if(Array.isArray(t))return t}function e(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function r(i,r){return t(i)||e(i)||o(i,r)||n()}function a(t){if(Array.isArray(t))return i(t)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return a(t)||e(t)||o(t)||c()}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function f(t,e){return Math.random()*(e-t)+t}var d={drawTraces:!0,useAntiCollisionBug:!0,strokeBalls:!1,dragWithMouseOver:!1,bounciness:0};window.settings=d;var v,y,w,m=function(){"use strict";function t(e,n,i){s(this,t),this.x=e,this.y=n,this.z=i}return h(t,[{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z)}},{key:"sub",value:function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z)}},{key:"mul",value:function(e){return new t(this.x*e,this.y*e,this.z*e)}},{key:"div",value:function(e){return new t(this.x/e,this.y/e,this.z/e)}},{key:"toRGB",value:function(){return"rgb(".concat(this.x," ").concat(this.y," ").concat(this.z,")")}},{key:"toRGBA",value:function(t){return"rgba(".concat(this.x,", ").concat(this.y,", ").concat(this.z,", ").concat(t,")")}}]),t}(),p=function(){"use strict";function t(e,n){s(this,t),this.x=e,this.y=n}return h(t,[{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"sub",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"mul",value:function(e){return new t(this.x*e,this.y*e)}},{key:"div",value:function(e){return new t(this.x/e,this.y/e)}}]),t}();(y=v||(v={})).length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},y.rotate=function(t,e,n){var i=Math.atan2(t.y,t.x)-Math.PI/2*e*n;return new p(Math.cos(i),Math.sin(i)).mul(v.length(t))},(w=y.RotationDirection||(y.RotationDirection={}))[w.Left=1]="Left",w[w.Right=-1]="Right";var b=new m(0,255,0),k=new m(255,0,0),g=b.toRGB();function x(t){var e=t.reduce((function(t,e){return t.stableScore<e.stableScore?t:e}));t.forEach((function(t){t.hasLeastStableScore=!1})),e.hasLeastStableScore=!0}function S(t){t.stableScore+=t.stableCount}function L(t,e){e.hasLeastStableScore&&(t.fillStyle="#fffd",t.beginPath(),t.arc(e.position.x,e.position.y,e.r/5,0,2*Math.PI),t.fill(),t.closePath())}var E=100,_=function(){"use strict";function t(e,n,i){s(this,t),this.r=i,this.stableScore=0,this.hasLeastStableScore=!1,this.position=new p(e,n),this.velocity=new p(f(-4,4),f(-4,4)),this.r=i,this.position_history=Array(E).fill(this.position),this.current_idx=0,this.stableCount=0}return h(t,[{key:"save",value:function(){this.position_history[this.current_idx]=this.position,this.current_idx=++this.current_idx%E}},{key:"getVA",value:function(){for(var t=[],e=0;e<E;++e){var n=(e+this.current_idx)%E,i=e/E;t[e]||(t[e]={}),t[e].position=this.position_history[n];var o=255*i;t[e].color=new m(0,o,0)}return t}},{key:"draw",value:function(t){d.drawTraces&&this.drawTrace(t),t.fillStyle=this.color.toRGB(),t.beginPath(),t.arc(this.position.x,this.position.y,this.r,0,2*Math.PI),d.strokeBalls&&this.drawStroke(t),t.fill(),t.closePath(),this.drawStableScore(t)}},{key:"drawStroke",value:function(t){t.strokeStyle="#000a",t.stroke()}},{key:"drawTrace",value:function(t){var e=this.getVA(),n=e[0].position;t.beginPath(),e.forEach((function(e){t.lineTo(e.position.x,e.position.y)})),t.lineTo(this.position.x,this.position.y),t.moveTo(n.x,n.y),t.closePath(),this.applyTraceColor(t,n)}},{key:"applyTraceColor",value:function(t,e){var n=t.createLinearGradient(e.x,e.y,this.position.x,this.position.y);n.addColorStop(0,"transparent"),n.addColorStop(1,g),t.strokeStyle=n,t.stroke()}},{key:"drawStableScore",value:function(t){L(t,this)}}]),t}();var M=1;var A=.35,R=.1,C=5e3,T=1e3,P=.2;function I(t,e){return n=t.clientX,i=t.clientY,o=e.clientX,r=e.clientY,Math.sqrt(Math.pow(n-o,2)+Math.pow(i-r,2));var n,i,o,r}function z(){return.18/(Math.abs(-1.55/A)/15.5)}var B,j=.01,q=.5;function D(t,e){if(d.dragWithMouseOver){var n=t(e);return function(t){var e=n.sub(t.position),i=v.length(e),o=t.r;i<o&&(t.position=t.position.add(e.mul(j*(o-i))),t.velocity=t.velocity.add(e.mul(q*(o-i))))}}}function O(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];window.addEventListener(n?"keydown":"keyup",(function(n){n.code!==t&&n.key!==t||e()}))}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=function(n){var i=function(){t(n),r()};function o(){window.removeEventListener("touchend",i)}function r(){window.removeEventListener("touchmove",o)}window.addEventListener("touchend",i,{once:!0}),window.addEventListener("touchmove",o,{once:!0}),setTimeout((function(){o(),r()}),e)};return window.addEventListener("touchstart",n),n}function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var K=function(){"use strict";function t(e){s(this,t),this.keysList=e,this.callbacks={},this.keys=Object.fromEntries(this.keysList.map((function(t){return[t,!1]}))),window.addEventListener("keydown",this.changeState.bind(this)),window.addEventListener("keyup",this.changeState.bind(this))}return h(t,[{key:"changeState",value:function(e){if(this.isKeyCodeInKeysList(e.code)&&(this.keys[e.code]="keydown"===e.type,!e.repeat&&this.keys[e.code])){var n,i,o=this;null===(i=(n=this.callbacks)[e.code])||void 0===i||i.call(n),setTimeout((function(){o.repeat(e)}),t.keyRepeatDelay)}}},{key:"isKeyCodeInKeysList",value:function(t){return this.keysList.includes(t)}},{key:"repeat",value:function(e){var n=this;if(this.keys[e.code])var i=setInterval((function(){var t,o;n.keys[e.code]?null===(o=(t=n.callbacks)[e.code])||void 0===o||o.call(t):clearInterval(i)}),t.keyRepeatInterval)}}]),t}();G(K,"keyRepeatInterval",60),G(K,"keyRepeatDelay",K.keyRepeatInterval);var Y={radius:{increment:"BracketRight",decrement:"BracketLeft",incrementFast:"}",decrementFast:"{"},velocity:{increment:"ArrowUp",decrement:"ArrowDown",rotateLeft:"ArrowLeft",rotateRight:"ArrowRight"}},W={default:.1,fast:.3},X={default:.2};function U(t,e){var n=t.r+t.r*e;t.r=Math.max(n,5)}function V(t,e){var n=!0,i=!1,o=void 0;if(B)e(B);else try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){e(r.value)}}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}}function H(t){t.velocity=t.velocity.mul(1+X.default)}function $(t){t.velocity=t.velocity.mul(1-X.default)}function J(t){t.velocity=v.rotate(t.velocity,X.default,v.RotationDirection.Left)}function N(t){t.velocity=v.rotate(t.velocity,X.default,v.RotationDirection.Right)}var Q,Z,tt,et=function(){"use strict";function t(e,n,i){var o=this;s(this,t),this.update=e,this.render=n,this.time_step=i,this.animation_frame_request=void 0,this.accumulated_time=i,this.time=0,this.startCycle=function(t){o.cycle(t)}}return h(t,[{key:"cycle",value:function(t){this.animation_frame_request=window.requestAnimationFrame(this.startCycle),this.accumulated_time+=t-this.time,this.time=t;var e=!1;for(this.accumulated_time>1e3&&(this.accumulated_time=this.time_step);this.accumulated_time>this.time_step;)this.accumulated_time-=this.time_step,this.update(t),e=!0;e&&this.render()}},{key:"start",value:function(){this.animation_frame_request=window.requestAnimationFrame(this.startCycle)}},{key:"stop",value:function(){window.cancelAnimationFrame(this.animation_frame_request)}}]),t}(),nt=document.querySelector("canvas"),it=nt.getContext("2d");function ot(){nt.width=window.innerWidth,nt.height=window.innerHeight}ot(),window.addEventListener("resize",ot),Z=function(t){(tt+=t)<0&&(tt=0),tt>1&&(tt=1),A=2.9*tt+R},tt=.1,window.addEventListener("wheel",(function(t){var e=t.deltaY;Z(-e/C*z())})),null!==navigator.userAgent.match(/iPhone|iPad|iPod/i)?window.addEventListener("touchmove",(function(t){var e,n,i,o;(function(t){return void 0!==t.scale})(t)&&(function(t){t.scale!==M&&t.preventDefault()}(t),e=t.scale,n=e-M,i=z()*P,o=A+n*P*i,A=Math.min(3,Math.max(R,o)))}),{passive:!1}):(Q=null,window.addEventListener("touchstart",(function(t){var e=t.touches;e.length>1&&(Q=I(e[0],e[1]))})),window.addEventListener("touchend",(function(){Q=null})),window.addEventListener("touchmove",(function(t){var e=t.touches;if(null!==Q){var n=I(e[0],e[1]);Z((n-Q)/T)}})));for(var rt,at,ct,ut,st=1,lt=1,ht=1,ft=1,dt=[],vt=0;vt<20;vt++){var yt=f(0,2*Math.PI),wt=350*Math.cos(yt),mt=350*Math.sin(yt);dt.push(new _(wt+.5*nt.width,mt+.5*nt.height,f(70,5)))}function pt(){ft=1===st?10:1}rt=dt,at=St,ct=70,ut=5,window.addEventListener("contextmenu",(function(t){t.preventDefault();var e=at(t),n=new _(e.x,e.y,f(ct,ut));(function(t,e){var n=t.find((function(t){return t.hasLeastStableScore}));n&&(e.stableScore=n.stableScore)})(rt,n),rt.push(n)})),function(t,e,n){var i=function(i){var o=e(i);!function(t){if(!t)return;B=B===t?null:t}(n(o,t))};window.addEventListener("click",i),F((function(t){if(1===t.touches.length){var e=t.touches[0];i({x:e.clientX,y:e.clientY})}})),O("Escape",(function(){B=null}))}(dt,St,(function(t,e){var n=!0,i=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var c=r.value,u=t.sub(c.position);if(v.length(u)<c.r)return c}}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return null})),function(t){var e=new K(Object.values(Y).flatMap(Object.values));!function(t,e){e.callbacks[Y.radius.increment]=function(){V(t,(function(t){U(t,W.default)}))},e.callbacks[Y.radius.decrement]=function(){V(t,(function(t){U(t,-W.default)}))},O(Y.radius.incrementFast,(function(){V(t,(function(t){U(t,W.fast)}))}),!0),O(Y.radius.decrementFast,(function(){V(t,(function(t){U(t,-W.fast)}))}),!0)}(t,e),function(t,e){e.callbacks[Y.velocity.increment]=function(){V(t,H)},e.callbacks[Y.velocity.decrement]=function(){V(t,$)},e.callbacks[Y.velocity.rotateLeft]=function(){V(t,J)},e.callbacks[Y.velocity.rotateRight]=function(){V(t,N)}}(t,e)}(dt),O("Space",pt),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,i=function(i){var o=setTimeout((function(){setTimeout((function(){t(i)}),n),window.removeEventListener("touchend",r),window.removeEventListener("touchmove",a)}),e);function r(){c(),window.removeEventListener("touchmove",a)}function a(){c(),window.removeEventListener("touchend",r)}function c(){clearTimeout(o)}window.addEventListener("touchend",r,{once:!0}),window.addEventListener("touchmove",a,{once:!0})};window.addEventListener("touchstart",i)}(pt),O("a",(function(){d.drawTraces=!d.drawTraces}));var bt,kt=0,gt={x:0,y:0};function xt(){return[-(t=B?B.position:bt).x+.5*nt.width/A,-t.y+.5*nt.height/A];var t}function St(t){var e=new p(t.x,t.y),n=r(xt(),2),i=n[0],o=n[1],a=new p(i,o);return e.div(A).sub(a)}window.addEventListener("mousemove",(function(t){gt.x=t.x,gt.y=t.y})),new et((function(t){ht!==ft&&(ht+=ft-ht);var e=!0;if(!lt){var n=!0,i=!1,o=void 0;try{for(var r,a=dt[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var c=r.value;c.stable=!0,c.save()}}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}!(e=function(t,e){var n=function(e){var n=function(e){var n=t[e],o=function(){i=!1,u.stable=!1,n.stable=!1};!function(t,e,n){var i=t.position.sub(e.position),o=v.length(i),r=t.r+e.r;o<r&&(null==n||n(),function(t,e,n,i,o){var r=t.div(e);i.position=i.position.add(r.mul(.5*(n-e))),o.position=o.position.sub(r.mul(.5*(n-e))),d.useAntiCollisionBug||(i.velocity=i.velocity.add(r.mul(.5*(n-e))),o.velocity=o.velocity.sub(r.mul(.5*(n-e))))}(i,o,r,t,e))}(u,n,o)},u=t[e],s=a.sub(u.position);u.velocity=u.velocity.add(s.mul(r)),null==c||c(u);for(var l=e+1;l<o;l++)n(l)},i=!0;x(t);for(var o=t.length,r=.01,a=new p(.5*nt.width,.5*nt.width),c=D(St,gt),u=0;u<o;u++)n(u);for(var s=0;s<o;s++)t[s].stable?t[s].stableCount++:t[s].stableCount=0,S(t[s]);return i}(dt))&&kt<200&&(kt=0),e&&++kt,ht&&(st=ht),lt=st}(function(t,e){var n=.016,i=!0,o=!1,r=void 0;try{for(var a,c=t[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var u=a.value;u.position=u.position.add(u.velocity.mul(n/e))}}catch(t){o=!0,r=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw r}}lt--})(dt,st),bt=new p(0,0);var u=!0,s=!1,l=void 0;try{for(var h,f=dt[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var y=h.value,w=kt>199?1:Math.min(1,y.stableCount/255),m=b.mul(w).add(k.mul(1-w));y.r;st>1&&y.r,bt=bt.add(y.position),y.color=m}}catch(t){s=!0,l=t}finally{try{u||null==f.return||f.return()}finally{if(s)throw l}}bt=bt.div(dt.length)}),(function(){var t;it.clearRect(0,0,nt.width,nt.height),it.save(),it.scale(A,A),(t=it).translate.apply(t,u(xt())),dt.forEach((function(t){return t.draw(it)})),it.fillStyle="purple",it.beginPath(),it.arc(bt.x,bt.y,10,0,2*Math.PI),it.fill(),it.closePath(),it.restore()}),1e3/60).start()}();